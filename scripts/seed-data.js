const axios = require('axios');

// Configuraci√≥n de la API de Strapi
const STRAPI_URL = 'http://localhost:1337/api';

// Datos de ejemplo para las categor√≠as
const categorias = [
  {
    nombre: 'F√≠sica',
    descripcion: 'Art√≠culos sobre f√≠sica te√≥rica y experimental, mec√°nica cu√°ntica, relatividad y m√°s.',
    slug: 'fisica'
  },
  {
    nombre: 'Matem√°ticas',
    descripcion: 'Contenido sobre matem√°ticas puras y aplicadas, √°lgebra, an√°lisis, topolog√≠a y geometr√≠a.',
    slug: 'matematicas'
  },
  {
    nombre: 'Ingenier√≠a',
    descripcion: 'Art√≠culos sobre ingenier√≠a en todas sus ramas, desde mec√°nica hasta sistemas complejos.',
    slug: 'ingenieria'
  },
  {
    nombre: 'Ciencias de la Computaci√≥n',
    descripcion: 'Algoritmos, estructuras de datos, inteligencia artificial y ciencias de la computaci√≥n.',
    slug: 'ciencias-computacion'
  }
];

// Datos de ejemplo para autores
const autores = [
  {
    nombre: 'Dr. Mar√≠a Gonz√°lez',
    biografia: 'Doctora en F√≠sica Te√≥rica por la Universidad de Barcelona. Especialista en mec√°nica cu√°ntica y sus interpretaciones. Ha publicado m√°s de 50 art√≠culos en revistas internacionales.',
    email: 'maria.gonzalez@mindraxia.com',
    twitter: '@mariagonzalezphd',
    linkedin: 'maria-gonzalez-fisica'
  },
  {
    nombre: 'Prof. Carlos Rodr√≠guez',
    biografia: 'Profesor de Matem√°ticas en el MIT. Experto en topolog√≠a algebraica y sus aplicaciones en f√≠sica de la materia condensada. Autor de varios libros de texto.',
    email: 'carlos.rodriguez@mindraxia.com',
    twitter: '@carlosmath',
    linkedin: 'carlos-rodriguez-math'
  },
  {
    nombre: 'Dra. Ana Mart√≠n',
    biografia: 'Ingeniera en Sistemas e investigadora en IA. Especialista en teor√≠a de la informaci√≥n y machine learning. Fundadora de varios startups tecnol√≥gicos.',
    email: 'ana.martin@mindraxia.com',
    twitter: '@anamartinai',
    linkedin: 'ana-martin-ia'
  }
];

async function crearCategorias() {
  console.log('üè∑Ô∏è  Creando categor√≠as...');
  
  for (const categoria of categorias) {
    try {
      const response = await axios.post(`${STRAPI_URL}/categorias`, {
        data: categoria
      });
      console.log(`‚úÖ Categor√≠a creada: ${categoria.nombre}`);
    } catch (error) {
      if (error.response?.status === 400) {
        console.log(`‚ö†Ô∏è  Categor√≠a ya existe: ${categoria.nombre}`);
      } else {
        console.error(`‚ùå Error creando categor√≠a ${categoria.nombre}:`, error.message);
      }
    }
  }
}

async function crearAutores() {
  console.log('üë• Creando autores...');
  
  for (const autor of autores) {
    try {
      const response = await axios.post(`${STRAPI_URL}/autores`, {
        data: autor
      });
      console.log(`‚úÖ Autor creado: ${autor.nombre}`);
    } catch (error) {
      if (error.response?.status === 400) {
        console.log(`‚ö†Ô∏è  Autor ya existe: ${autor.nombre}`);
      } else {
        console.error(`‚ùå Error creando autor ${autor.nombre}:`, error.message);
      }
    }
  }
}

async function crearArticulos() {
  console.log('üìù Creando art√≠culos de ejemplo...');
  
  // Primero obtenemos las categor√≠as y autores creados
  try {
    const [categoriasResponse, autoresResponse] = await Promise.all([
      axios.get(`${STRAPI_URL}/categorias`),
      axios.get(`${STRAPI_URL}/autores`)
    ]);
    
    const categoriasData = categoriasResponse.data.data;
    const autoresData = autoresResponse.data.data;
    
    const articulos = [
      {
        titulo: 'Mec√°nica Cu√°ntica: Interpretaciones y Paradojas',
        resumen: 'Un an√°lisis profundo de las diferentes interpretaciones de la mec√°nica cu√°ntica y sus implicaciones filos√≥ficas.',
        contenido: `
# Mec√°nica Cu√°ntica: Interpretaciones y Paradojas

La mec√°nica cu√°ntica es una de las teor√≠as m√°s exitosas y a la vez m√°s desconcertantes de la f√≠sica moderna. Desde su formulaci√≥n en las primeras d√©cadas del siglo XX, ha generado debates filos√≥ficos que contin√∫an hasta hoy.

## Las Interpretaciones Principales

### Interpretaci√≥n de Copenhague
La interpretaci√≥n m√°s tradicional, propuesta por Niels Bohr y Werner Heisenberg, establece que...

### Interpretaci√≥n de Muchos Mundos
Hugh Everett III propuso en 1957 una interpretaci√≥n radical que sugiere...

### Interpretaci√≥n de Variables Ocultas
David Bohm desarroll√≥ una interpretaci√≥n determinista que...

## Conclusiones

La mec√°nica cu√°ntica nos ense√±a que la realidad es mucho m√°s extra√±a de lo que nuestro sentido com√∫n sugiere.
        `,
        slug: 'mecanica-cuantica-interpretaciones-paradojas',
        fechaPublicacion: '2024-01-15T10:00:00.000Z',
        tiempoLectura: 12,
        etiquetas: ['mec√°nica cu√°ntica', 'f√≠sica te√≥rica', 'filosof√≠a de la ciencia'],
        autor: autoresData.find(a => a.attributes.nombre === 'Dr. Mar√≠a Gonz√°lez')?.id,
        categoria: categoriasData.find(c => c.attributes.nombre === 'F√≠sica')?.id
      },
      {
        titulo: 'Topolog√≠a Algebraica en la F√≠sica Moderna',
        resumen: 'C√≥mo los conceptos de topolog√≠a algebraica han revolucionado nuestra comprensi√≥n de la materia condensada.',
        contenido: `
# Topolog√≠a Algebraica en la F√≠sica Moderna

La topolog√≠a algebraica ha emergido como una herramienta fundamental en la f√≠sica de la materia condensada, proporcionando nuevas perspectivas sobre fen√≥menos cu√°nticos.

## Fundamentos Matem√°ticos

### Espacios Topol√≥gicos
Un espacio topol√≥gico es una estructura matem√°tica que permite definir conceptos como...

### Homolog√≠a y Cohomolog√≠a
Estos invariantes topol√≥gicos nos permiten clasificar espacios seg√∫n...

## Aplicaciones en F√≠sica

### Aislantes Topol√≥gicos
Los aislantes topol√≥gicos representan una nueva fase de la materia donde...

### Superconductores Topol√≥gicos
Estos materiales ex√≥ticos podr√≠an ser la clave para la computaci√≥n cu√°ntica...

## Perspectivas Futuras

La intersecci√≥n entre topolog√≠a y f√≠sica contin√∫a generando nuevos descubrimientos.
        `,
        slug: 'topologia-algebraica-fisica-moderna',
        fechaPublicacion: '2024-01-10T14:30:00.000Z',
        tiempoLectura: 15,
        etiquetas: ['topolog√≠a', 'f√≠sica de la materia condensada', 'matem√°ticas aplicadas'],
        autor: autoresData.find(a => a.attributes.nombre === 'Prof. Carlos Rodr√≠guez')?.id,
        categoria: categoriasData.find(c => c.attributes.nombre === 'Matem√°ticas')?.id
      },
      {
        titulo: 'Inteligencia Artificial y Teor√≠a de la Informaci√≥n',
        resumen: 'Explorando las bases matem√°ticas de la IA moderna desde la perspectiva de la teor√≠a de la informaci√≥n.',
        contenido: `
# Inteligencia Artificial y Teor√≠a de la Informaci√≥n

La teor√≠a de la informaci√≥n, desarrollada por Claude Shannon, proporciona el marco matem√°tico fundamental para entender c√≥mo las m√°quinas pueden aprender y procesar informaci√≥n.

## Fundamentos de la Teor√≠a de la Informaci√≥n

### Entrop√≠a de Shannon
La entrop√≠a mide la incertidumbre o el contenido de informaci√≥n de una fuente...

### Informaci√≥n Mutua
Este concepto cuantifica la dependencia entre variables aleatorias...

## Aplicaciones en Machine Learning

### Criterios de Divisi√≥n en √Årboles de Decisi√≥n
La ganancia de informaci√≥n utiliza la entrop√≠a para...

### Redes Neuronales y Compresi√≥n
Las redes neuronales pueden verse como sistemas de compresi√≥n de informaci√≥n...

## Fronteras Actuales

### Informaci√≥n Cu√°ntica
La extensi√≥n de la teor√≠a de la informaci√≥n al reino cu√°ntico abre nuevas posibilidades...

### IA Explicable
Usar principios de teor√≠a de la informaci√≥n para hacer m√°s interpretables los modelos de IA.
        `,
        slug: 'inteligencia-artificial-teoria-informacion',
        fechaPublicacion: '2024-01-05T09:15:00.000Z',
        tiempoLectura: 10,
        etiquetas: ['IA', 'teor√≠a de la informaci√≥n', 'machine learning'],
        autor: autoresData.find(a => a.attributes.nombre === 'Dra. Ana Mart√≠n')?.id,
        categoria: categoriasData.find(c => c.attributes.nombre === 'Ciencias de la Computaci√≥n')?.id
      }
    ];
    
    for (const articulo of articulos) {
      try {
        const response = await axios.post(`${STRAPI_URL}/articulos`, {
          data: articulo
        });
        console.log(`‚úÖ Art√≠culo creado: ${articulo.titulo}`);
      } catch (error) {
        if (error.response?.status === 400) {
          console.log(`‚ö†Ô∏è  Art√≠culo ya existe: ${articulo.titulo}`);
        } else {
          console.error(`‚ùå Error creando art√≠culo ${articulo.titulo}:`, error.message);
        }
      }
    }
    
  } catch (error) {
    console.error('‚ùå Error obteniendo datos para crear art√≠culos:', error.message);
  }
}

async function main() {
  console.log('üöÄ Iniciando poblaci√≥n de datos en Mindraxia...\n');
  
  try {
    await crearCategorias();
    console.log('');
    
    await crearAutores();
    console.log('');
    
    await crearArticulos();
    console.log('');
    
    console.log('‚úÖ ¬°Datos de ejemplo creados exitosamente!');
    console.log('üåê Puedes ver el contenido en: http://localhost:1337/admin');
    
  } catch (error) {
    console.error('‚ùå Error general:', error.message);
    console.log('\n‚ö†Ô∏è  Aseg√∫rate de que Strapi est√© corriendo en http://localhost:1337');
  }
}

// Ejecutar solo si se llama directamente
if (require.main === module) {
  main();
}

module.exports = { crearCategorias, crearAutores, crearArticulos }; 